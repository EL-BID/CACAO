<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" th:with="lang=${#locale.language}" th:lang="${lang}">
<head th:replace="fragments/page_fragments :: header(more_links=~{this::link}, more_scripts=~{this::script[src]})">
	<!-- Although the entire head will be replaced, its necessary to establish the charset
	for all static content before the Thymeleaf processing. -->
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" type="text/css" class="ui" href="/css/tabulator_semantic-ui.min.css">
	<script src="/js/tabulator.min.js"></script>
	<script src="/js/luxon.min.js"><</script>
</head>
<body>
	<!-- Fix to avoid overlap from the Menu -->
	<div>
		<br>
	</div>
	<div class="ui container">
		<h2 class="ui header">
			<i class="file alternate outline icon"></i>
			<div class="content" th:text="#{templates}">All Templates</div>
		</h2>
			<div id="app">
				<div id="table" class="ui orange table"></div>
			</div>
		<div class="ui column right floated">
			<div class="ui right floated primary labeled icon">
				<a th:href="@{/addtemplate}" class="ui button"><i class="plus icon"></i><span th:text="#{template.new}">New Template</span></a>
			</div>
		</div>
	</div>
 
<script th:nonce="${cspNonce}" th:inline="javascript">
var editRow = function(e, cell) {
	window.location.replace([[@{/edittemplate/}]] +  cell.getRow().getIndex());
}
var editIcon = function(cell, formatterParams){ return "<i class='edit icon'></i>"};
var tableData = /*[[${templates}]]*/ null;
table = new Tabulator('#table', {
	index: 'id',
	layout: "fitColumns", //fit columns to width of table (optional)
    pagination: true,
	paginationSize: 5,
	data: tableData,
    persistence:{
		columns:true,
	},			
	persistenceID:"docs_templates_persistence",	
	columns:[ //Define Table Columns
		{title: /*[[#{template.name}]]*/ "Name", field:"name"},
		{title: /*[[#{template.group}]]*/ "Group", field:"group"},
		{title: /*[[#{template.version}]]*/ "Version", field:"version"},
		{title: /*[[#{template.periodicity}]]*/ "Periodicity", field:"periodicity"},
		{title: /*{{#{template.required}}} */ "Required", field:"required", headerSort:false, 
			formatter:"tickCross",  
			formatterParams: { crossElement:false} },
		{formatter:editIcon, width:50, tooltip: /*{{#{edit}}} */ "Edit", cellClick: editRow, headerSort:false}
	]
})
</script>
</body>
</html>
    
