<head>
<html xmlns:th="http://www.thymeleaf.org" th:with="lang=${#locale.language}" th:lang="${lang}">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<div class="ui styled fluid accordion" th:fragment="content">
<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">¿Qué es CACAO?</span>
</div>
<div class="content markdown">
## ¿Qué es el sistema CACAO?
El CACAO es un sistema que mantiene la Administración Tributaria para recibir y mantener archivos con datos contables de los contribuyentes.

## ¿Qué significa CACAO?
CACAO es un acrónimo de *Sistema de **C**onsulta y **A**lmacenamiento de Datos **C**ontables y **A**poyo **O**rganizativo.

## Acceder al sistema CACAO

Utilice el botón `Iniciar CACAO` ubicado en el centro de la página principal del sistema, o haga clic en la opción `Iniciar CACAO` en la esquina superior derecha para acceder al área autenticada del sistema CACAO.

> **¡Atención!**
> El sistema CACAO permite un acceso seguro de varias maneras.


Al hacer clic en `Iniciar sesión con Google`, `Iniciar sesión con Microsoft` o `Iniciar sesión con Facebook`, el usuario puede iniciar sesión utilizando su cuenta con estos proveedores, sin necesidad de crear una contraseña específica para CACAO. **Este es el modelo de acceso recomendado.**

Para acceder a CACAO utilizando un login/contraseña, póngase en contacto con la Administración Tributaria.

## El menú de la barra lateral

Se puede acceder a todas las funcionalidades del sistema CACAO a través del menú de la barra lateral.


> **¡Atención!**
> El menú de la barra lateral se encuentra en la esquina superior izquierda, identificado por 3 barras apiladas. 

Luego de ingresar a CACAO, o de seleccionar la opción `Página de inicio` en el menú de la barra lateral, se presentará una interfaz de tarjeta con accesos directos a las funcionalidades más utilizadas de CACAO.

## Control de acceso basado en perfiles

El sistema CACAO implementa un Control de Acceso Basado en Perfiles. **No todas las funciones están disponibles para todos los perfiles**.

Si no tiene acceso a una función que necesita, póngase en contacto con la Administración Tributaria. 
</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Carga de documentos a la Administración Tributaria</span>
</div>
<div class="content markdown">
## Cómo cargar documentos

Utilice la opción `Cargar documentos` ubicada en el menú de la barra lateral.

Una vez seleccionada la opción `Cargar documentos`, es necesario indicar qué tipo de documento se enviará a CACAO.

El menú desplegable `Plantilla de Documentos` muestra todos los posibles tipos de documentos que CACAO puede recibir y validar.

> **¡Atención!**
> El envío de documentos de modelos que no existen en CACAO, o la elección de un modelo diferente al que representa el archivo que se enviará, provocará el rechazo del documento por parte de CACAO.
 
Seleccione en el menú desplegable el tipo de archivo que desea enviar. El botón `Cargar archivo` estará disponible. Al seleccionar el botón `Cargar archivo`, se abrirá la funcionalidad para elegir el archivo a enviar.

La funcionalidad para elegir el archivo depende del Sistema Operativo que se esté utilizando en el equipo del usuario. Por favor, consulte el manual de su sistema operativo si tiene dudas sobre cómo utilizar esta función.

Después de seleccionar el archivo, se abrirá una ventana para confirmar que desea enviar el archivo. Seleccione `Sí` para enviar el archivo, o `No` para volver atrás.

Una vez enviado el archivo, el sistema CACAO le informará si la operación fue exitosa. 

## Comprobación de los ficheros cargados y su situación.

Para comprobar los ficheros subidos o el estado de validación de cada uno de ellos, utilice la opción `Todas las Cargas` situada en el menú de la barra lateral.

Se presentará una tabla con todos los documentos cargados. Esta tabla muestra:

* El **Usuario** que cargó el archivo
* El **ID del contribuyente** al que se refiere el fichero
* El **periodo fiscal** al que se refiere el fichero
* El **Plantilla** que indica el tipo de fichero enviado
* La **fecha/hora de carga**
* La **Situación** del expediente. Las posibles situaciones son:
	* **Recibido** - El archivo ha sido recibido por CACAO
	* **Aceptado** - El proceso de validación ha aceptado comenzar a revisar el archivo
	* **Válido** - El archivo ha sido validado y su formato cumple con la plantilla del documento
	* **Inválido** - El archivo ha sido rechazado por no cumplir con la plantilla del documento
	* **Pendiente**: El archivo está esperando que se cargue otro archivo para que comience el proceso de ETL
	* **Procesado**: El proceso ETL se ha ejecutado en este archivo
	* **Reemplazado** - Este archivo ha sido reemplazado por otro archivo.

> **¡Atención!**
> CACAO aplica **dos** procesos secuenciales:
> * _Validación de archivos_, cuando CACAO valida cada archivo contra la plantilla del documento.
> * _Extracción, transformación y carga de datos (ETL)_, cuando CACAO lee los datos de los archivos validados, realiza varios cálculos y transformaciones y almacena los resultados en su propia base de datos.
>
> Para obtener más información sobre las plantillas de documentos, consulte la entrada `Gestión de plantillas de documentos` de este manual del usuario.
	
También hay 3 funciones disponibles para cada Cargar:

* Mostrar el **historial de la situación**, identificado por un icono de `archivo`
* Mostrar las **mensajes de error**, si las hay, que se produjeron durante la validación del archivo, identificado por un icono de `señal de advertencia`
* **Descargar** el fichero, identificado con un icono de un `disquete`.  

</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Gestión de usuarios</span>
</div>
<div class="content markdown">
## Listado de usuarios de CACAO

Para listar y administrar los usuarios de CACAO, seleccione la opción `Usuarios` ubicada en el menú de la barra lateral.

Se presentará una tabla con todos los usuarios. Esta tabla muestra:

* El **nombre** del usuario
* Los **datos de acceso** del usuario
* El **perfil** asignado al usuario
* El **ID de contribuyente** del usuario

También hay 2 funciones disponibles para cada usuario:

* **Editar** la información del usuario, identificada por un icono de `papel y lápiz`.
* **Eliminar** el usuario de CACAO, identificado con un icono de `papelera`. 

## Creación de usuarios

Para crear un nuevo usuario, seleccione el botón `Nuevo Usuario` en la parte inferior izquierda de la tabla de usuarios.

> **¡Atención!**
> Aunque es posible crear un usuario manualmente, es recomendable utilizar siempre `Iniciar sesión con Google`, `Iniciar sesión con Microsoft` o `Iniciar sesión con Facebook`, que crean automáticamente el usuario de CACAO.


Se muestra una interfaz para insertar la información de los usuarios. Después de completar toda la información requerida, seleccione el botón `Añadir usuario`.

## Editar la información del usuario

La misma interfaz para crear un usuario se puede utilizar para editar la información del usuario. Después de cambiar la información deseada, seleccione el botón `Guardar`.

## Eliminación de un usuario

Para eliminar un usuario de CACAO, seleccione el icono de la "papelera" junto al usuario deseado en la tabla de usuarios. Aparecerá un diálogo de confirmación. Seleccione `Sí` para eliminar el usuario, o `No` para cancelar la operación.

> **¡Atención!**
>  El procedimiento de eliminación del usuario no puede deshacerse. Si es necesario, habrá que volver a crear el usuario.

</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Gestión de contribuyentes</span>
</div>
<div class="content markdown">
## Listado de contribuyentes de CACAO

Para listar y administrar los contribuyentes, seleccione la opción `Contribuyentes` ubicada en el menú de la barra lateral.

Se presentará una tabla con todos los contribuyentes. Esta tabla muestra:

* El **ID de contribuyente** del usuario
* El **nombre** del contribuyente

También hay 2 funciones disponibles para cada contribuyente:

* **Editar** la información del contribuyente, identificada por un icono de `papel y lápiz`.
* **Eliminar** el contribuyente de CACAO, identificado con un icono de `papelera`. 

## Creación de contribuyentes

Para crear un nuevo contribuyente, seleccione el botón `Nuevo contribuyente` en la parte inferior izquierda de la tabla de contribuyentes.

Se muestra una interfaz para insertar la información de los contribuyentes. Después de completar toda la información requerida, seleccione el botón `Añadir contribuyente`.

## Editar la información del contribuyente

La misma interfaz para crear un contribuyente se puede utilizar para editar la información del contribuyente. Después de cambiar la información deseada, seleccione el botón `Guardar`.

## Eliminación de un contribuyente

Para eliminar un contribuyente de CACAO, seleccione el icono de la "papelera" junto al contribuyente deseado en la tabla de usuarios. Aparecerá un diálogo de confirmación. Seleccione `Sí` para eliminar el usuario, o `No` para cancelar la operación.

> **¡Atención!**
> El procedimiento de eliminación del contribuyente no puede deshacerse. Si es necesario, habrá que volver a crear el usuario.

</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Análisis vertical y horizontal</span>
</div>
<div class="content markdown">
## ¿Para qué sirve un análisis vertical y horizontal?

Los análisis verticales y horizontales permiten visualizar el estado de un solo contribuyente. La fuente de datos para estos análisis es el diario cargado por el Contribuyente.

A **análise vertical** apresenta a ficha financeira para o período de modo a que o nível 1 da ficha (Categoria) seja igual a 100%, e depois é apresentada a percentagem que cada elemento do item 2 (subcategoria) representa destes 100%, e assim por diante.

Por ejemplo:

|Nível|Categoria|SubCategoria |Comparación|
|-|-|-|-|
|**1**|**Activo**||**100%**|
|2|Activo|Efectivo y equivalentes de efectivo|66,67%|
|2|Activo|Inventario|33,33%|

El **análisis horizontal** compara dos períodos uno al lado del otro, incluyendo una tercera columna que presenta lo que representa el segundo período en relación con el primero, que se considera el 100%.

Por ejemplo:

|Nivel|Categoría|Subcategoría|Primer Periodo|Segundo Periodo|Comparación|
|-|-|-|-|-|-|
|**1**|**Activo**||**1500**|**1050**|**70%**|
|2|Activo|Efectivo y equivalentes de efectivo|1000|450|45%|
|2|Activo|Inventario|500|600|120%|

También es posible realizar **ambos análisis** simultáneamente. En esta situación, después de la información del primer período, estará la columna de comparación vertical. Después de la información correspondiente al segundo período, se realizará la comparación horizontal.

|Nivel|Categoría|Subcategoría|Primer Periodo|Comparación vertical|Segundo Periodo|Comparación horizontal|
|-|-|-|-|-|-|-|
|**1**|**Activo**||**1500**|**100%**|**1050**|**70%**|
|2|Activo|Efectivo y equivalentes de efectivo|1000|66,67%|450|45%|
|2|Activo|Inventario|500|33,33%|600|120%|

## Uso del análisis vertical y horizontal

Para usar el análisis vertical y horizontal, seleccione la opción `Análisis` ubicada en el menú de la barra lateral, luego seleccione `Análisis vertical y horizontal`.

Es obligatorio seleccionar un Contribuyente por su *nombre* o *Identificación del Contribuyente* del menú **Nombre**. Puede desplazarse por la lista de contribuyentes o ingresar el nombre o la identificación del contribuyente.

El siguiente paso es elegir el tipo de análisis. Es posible elegir entre:

* **Análisis vertical**
* **Análisis horizontal**
* **Ambos** análisis vertical y horizontal

El tercer paso es seleccionar el **período base**. El período base es el primer período en todas las comparaciones.

En el cuarto paso se debe seleccionar la periodicidad del análisis. Esta selección controla los períodos que se compararán con el período base.

El último paso es seleccionar los niveles del plan de cuentas que se mostrarán:

* **Nivel 1** - solo se mostrará la categoría
* **Nivel 2** - se mostrarán tanto la categoría como la subcategoría
* **Nivel 3** - Se mostrará la categoría, subcategoría y cuenta

Es posible mostrar cuentas con saldo *cero*, seleccionando la opción `Mostrar cuentas con saldo CERO`.

Con todas las selecciones realizadas, seleccione `Buscar` para recuperar los datos y el análisis deseado. 

</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Análisis general</span>
</div>
<div class="content markdown">
## ¿Para qué sirve un Análisis General?

El Análisis General permite evaluar el resultado de un grupo de contribuyentes. La fuente de datos para el análisis general puede ser el diario enviado por los contribuyentes, o la declaración de renta declarada del año. Con este análisis es posible visualizar gráficamente los patrones de comportamiento de los contribuyentes, así como identificar aquellos con comportamiento discrepante.

Para un grupo dado de contribuyentes que comparten un calificador común, el análisis general muestra para cada asiento del Diario/Declaración de Renta Declarada un **diagrama de caja** que representa la dispersión de los contribuyentes.

> **¡Atención!**
> Los calificadores son definidos por la Administración Tributaria y pueden diferir para cada jurisdicción.


El **diagrama de caja** es un método para demostrar gráficamente los grupos de localidad, dispersión y asimetría de datos numéricos a través de sus cuartiles. En CACAO, el diagrama de caja muestra:

* **Mínimo** (Q0 o percentil 0): el punto de datos más bajo en el conjunto de datos excluyendo cualquier valor atípico
* **Máximo** (Q4 o percentil 100): el punto de datos más alto en el conjunto de datos excluyendo cualquier valor atípico
* **Mediana** (Q2 o percentil 50): el valor medio en el conjunto de datos
* **Primer cuartil** (Q1 o percentil 25): es la mediana de la mitad inferior del conjunto de datos.
* **Tercer cuartil** (Q3 o percentil 75): es la mediana de la mitad superior del conjunto de datos.
* **Valores atípicos**: los puntos de datos que difieren significativamente del resto del conjunto de datos se trazan como puntos individuales más allá de los bigotes en el diagrama de caja.

Si pasa el puntero del ratón por encima de un boxplot en CACAO, se mostrará un tooltip con la información detallada que representa el boxplot.

Siempre que se identifique un valor atípico, se mostrará en el boxplot como un **punto**, y la identificación del contribuyente para este valor atípico también se detallará en la tabla auxiliar junto a los boxplots.

La imagen que contiene todos los boxplots puede descargarse seleccionando el botón `...` situado en la parte superior derecha del área de boxplots. Los datos de la tabla auxiliar pueden descargarse seleccionando el botón `XLS` en la esquina inferior izquierda de la tabla.

## Uso del análisis general

Para usar el análisis general, seleccione la opción `Análisis` ubicada en el menú de la barra lateral, luego seleccione `Análisis general`.

El primer paso para el Análisis General es elegir el calificador para el grupo de contribuyentes que será objeto del análisis. Eso se puede lograr desplazándose por el menú **Calificadores**.

Una vez que se selecciona el calificador, el valor del calificador debe elegirse en el menú **Valores del calificador**.

El tercer paso es seleccionar la fuente de datos, que puede ser:

* Los datos calculados por CACAO del **Diario** de cada contribuyente
* Los datos presentados por el contribuyente en la **Declaración de Renta Declarada**

El último paso es elegir el período base para crear el Análisis General, en el menú **Periodo Base**.

Con todas las selecciones realizadas, seleccione `Buscar` para recuperar los datos y el análisis deseado.

</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Análisis de la Renta Declarada</span>
</div>
<div class="content markdown">
## ¿Cuál es el objetivo del Análisis de la Renta Declarada?

El Análisis de la Renta Declarada compara la información proporcionada por el Contribuyente, en el archivo de la Renta Declarada enviada a la Administración Tributaria, contra la información calculada por CACAO con los datos disponibles del Diario enviado por el contribuyente.

Las diferencias entre ambas informaciones pueden indicar errores en la información proporcionada por el Contribuyente.

## Uso del análisis del estado de resultados

Para usar el análisis general, seleccione la opción `Análisis` ubicada en el menú de la barra lateral, luego seleccione `Análisis del estado de resultados`.

En el menú **Nombre**, seleccione el contribuyente que será objeto del análisis.

En el menú **Período base**, seleccione el año cuya cuenta de resultados se comparará.

Con todas las selecciones realizadas, seleccione `Buscar` para recuperar los datos y el análisis deseado.

La tabla se mostrará con la siguiente información en cada fila:

* La **declaración** analizada
* Los datos **declarados** por el contribuyente en la Declaración de la Renta
* Los datos **calculados** por CACAO a partir de la revista
* La **diferencia** entre los dos valores, si la hay.

</div>
</div> 

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Visón del Contribuyente</span>
</div>
<div class="content markdown">

## ¿Cuál es el propósito de la Visón del Contribuyente?

La **Visón del Contribuyente** presenta un resumen de diferente información sobre un contribuyente seleccionado y el estado de su negocio.

Para un contribuyente determinado, la **Visón del Contribuyente** muestra, si existe:

* La **participación de capital** que el contribuyente tienen en otros negocios
* Los **Accionistas** del contribuyente seleccionado
* Respecto a los **Ingresos por Ventas Netas y Servicios y Beneficio Bruto**, los valores declarados y los calculados por CACAO a partir del diario
* El monto de las **Provisiones Fiscales**
* Los **Mayores Gastos** del contribuyente
* Los **Principales Clientes y Proveedores** del contribuyente

## Uso de la Visón del Contribuyente

Para usar el análisis general, seleccione la opción `Análisis` ubicada en el menú de la barra lateral, luego seleccione `Visón del Contribuyente`.

En el menú **Nombre**, seleccione el contribuyente que será objeto del análisis.

En el menú **Período base**, seleccione el año cuya cuenta de resultados se comparará.

Con todas las selecciones realizadas, seleccione `Buscar` para recuperar los datos y el análisis deseado.

</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Flujos contables</span>
</div>
<div class="content markdown">

## ¿Cuál es el propósito del análisis de Flujos Contables?

El análisis de **Flujos Contables** muestra gráficamente la _contabilidad por partida doble_ utilizada por el contribuyente para crear el diario que presenta a la Administración Tributaria.

Cada transacción financiera se registra en al menos dos cuentas contables diferentes, una es la **entrada de crédito** y la otra es una **entrada de débito**. Pueden existir múltiples entradas de créditos o débitos en una sola transacción financiera, puesto que la suma de todos los créditos de una transacción es igual a la suma de todos sus débitos.

Cada transacción está representada por una _flecha_ que comienza en la cuenta que se **acredita** y termina en la cuenta que se **débita**. Si varias transacciones financieras comienzan y terminan en las mismas cuentas, sus valores se suman y la flecha que conecta los dos se vuelve más gruesa.

> **¡Atención!**
> Cuanto más **gruesa** sea la flecha que conecta dos cuentas, mayor será la suma de las transacciones financieras que conectan las dos cuentas.

## Usando el análisis de Flujos Contables

Para usar el análisis general, seleccione la opción `Análisis` ubicada en el menú de la barra lateral, luego seleccione `Flujos contables`.

En el menú **Nombre**, seleccione el contribuyente que será objeto del análisis.

Para seleccionar el período del análisis, seleccione la fecha de inicio en el menú **Fecha inicial** y la fecha de finalización en el menú **Fecha final**.

Con todas las selecciones realizadas, se mostrarán los flujos contables.

> **¡Atención!**
> Si **pasa** el mouse sobre una flecha, se mostrará la suma de las transacciones financieras que conectan las dos cuentas.

### Filtros

**Flujos contables** tiene dos filtros principales: **cuenta seleccionada** y **rango de valores**.

Si hace clic en una sola cuenta, solo se mostrarán las flechas que conectan esta cuenta. En el momento en que hace clic en cualquier lugar de los flujos contables, todas las flechas disponibles regresan.

En la parte superior de los flujos contables se encuentra un gráfico de dispersión donde cada **punto** representa una flecha. Los puntos se muestran de acuerdo con su valor y el eje x del gráfico representa todos los valores posibles. Cambiar la posición de la barra izquierda y derecha del gráfico a lo largo de su eje x controla qué flechas se muestran.

> **¡Atención!**
> Ambos filtros se pueden utilizar simultáneamente. 

</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Relaciones interpersonales</span>
</div>
<div class="content markdown">
## ¿Qué son las Relaciones Interpersonales?

Usualmente un contribuyente tiene múltiples relaciones con otras personas, que son ellos mismos contribuyentes. Una entidad legal puede tener un director, una persona física puede tener un contador, etc.

El registro de esas relaciones interpersonales permite que un contribuyente presente o acceda a los datos de CACAO en nombre de otro contribuyente.

## Lista de Relaciones Interpersonales

Para enumerar y administrar las Relaciones Interpersonales, seleccione la opción `Relaciones interpersonales` ubicada en el menú de la barra lateral.

Se mostrará una tabla con una lista de Relaciones Interpersonales. Para cada relación de la lista, está disponible lo siguiente:

* **Persona de referencia**, que indica el "origen" de la relación
* **Persona referida**, que indica el "destino" de la relación
* El **Tipo de relación**, como _contador_ o _representante legal_
* Una indicación de si la relación fue **borrada** del grupo de relaciones interpersonales activas
* Un icono de "papelera" para borrar una relación.

> **¡Atención!**
> CACAO debe almacenar todas las Relaciones Interpersonales para crear un _log_ con fines de auditoría. De esa manera, una relación nunca se **elimina** del sistema, sino que solo se pone en un estado inactivo que no permite más acceso a los datos de la *Persona de referencia* por parte de la *Persona referida*.

## Creación de Relaciones Interpersonales

Para crear una nueva Relación Interpersonal, seleccione el botón `Nueva relación interpersonal` en la parte inferior izquierda de la tabla de Relaciones Interpersonales.

Se muestra una interfaz para insertar la información de las Relaciones Interpersonales. Después de completar toda la información requerida, seleccione el botón `Guardar`.

## Edición de la información del usuario

CACAO no permite editar una Relación Interpersonal. Debe eliminar la relación usando el icono `Papelera` y luego crear una nueva.
</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Tablas de dominio</span>
</div>
<div class="content markdown">
## ¿Cuál es el propósito de las Tablas de Dominio en CACAO?

Algunos de los datos que recibe una Administración Tributaria deben adherirse a un dominio específico para ser debidamente validados. Por ejemplo, existen diferentes conjuntos de normas que rigen la información financiera y la contabilidad, y la Administración Tributaria debe establecer cuáles serán aceptadas y validadas.

La funcionalidad de **Tablas de Dominio** le permite a la Administración Tributaria definir conjuntos de dominios personalizados para los datos que serán incluidos en los archivos que serán cargados por el contribuyente a CACAO.

El dominio es la colección de todos los objetos en un sistema. En CACAO, un dominio especifica todos los valores posibles que puede representar un dato dado.

## Ejemplos de tablas de dominio

Uno de los dominios específicos más sencillos necesarios para un dato contable es la **naturaleza** de una transacción financiera. Normalmente este dominio contiene sólo dos valores: _debito_ o _crédito_. 

Al establecer un dominio de **naturaleza de la transacción financiera** con sólo los valores _debito_ y _crédito_ se informa a CACAO que cualquier otro valor para este dominio no debe ser aceptado, y el archivo cargado a CACAO será rechazado.

> **¡Atención!**
> En CACAO, las tablas de dominio son **sensibles al idioma**. Por lo tanto, si la Administración Tributaria está ejecutando CACAO en un entorno multilingüe, las tablas de dominio deben indicar todos los valores posibles para cada idioma aceptado. Por ejemplo, una tabla de dominio de **naturaleza de las transacciones financieras** podría tener el siguiente aspecto:
> |Clave de entrada|Lenguaje de la entrada|Descripción de la entrada|
> |-|-|-|
> |D|English|Debit|
> |C|English|Debit|
> |D|Spanish|Débito|
> |C|Spanish|Crédito|

Otro ejemplo de dominio específico es la norma contable utilizada. Una Administración Tributaria puede aceptar tanto las IFRS (Normas Internacionales de Información Financiera) como los GAAP (Principios Contables Generalmente Aceptados), por lo que CACAO debe configurarse con dos tablas de dominio, una para cada norma. Por ejemplo:

**Extracto de la tabla de dominios de las categorías de cuentas IFRS**
|Clave de entrada|Lenguaje de la entrada|Descripción de la entrada|
|-|-|-|
|1|English|Asset|
|1|Spanish|Activo|
|2|English|Equity|
|2|Spanish|Patrimonio Neto|
|3|English|Liability|
|3|Spanish|Pasivo|

**Extracto de la tabla de dominios de las categorías de cuentas GAAP**
|Clave de entrada|Lenguaje de la entrada|Descripción de la entrada|
|-|-|-|
|1|English|Asset|
|1|Spanish|Activo|
|2|English|Liability|
|2|Spanish|Passivo|
|3|English|Equity|
|3|Spanish|Patrimonio Neto|

Una inspección minuciosa de las dos tablas de dominios muestra que las IFRS y los GAAP utilizan el mismo código de categoría de cuenta para el **Activo**, pero códigos diferentes para el **Pasivo** y el **Patrimonio**. Sin las definiciones de las tablas de dominio, CACAO no podría entender esas diferencias.

## Gestión de las Tablas de Dominio

Para administrar las Tablas de Dominio, seleccione la opción `Tablas de Dominio` ubicada en el menú de la barra lateral. Se mostrará una tabla con todas las Tablas de Dominio ya registradas en CACAO.

Para cada tabla de dominio, se mostrará:
* El **Nombre** de la tabla de dominio
* La **Versión** de la tabla de dominio
* El **Grupo** del que forma parte la tabla de dominio
* Un icono de `papel y lápiz` que representa la función **Editar tabla de dominio**.
* Un icono de `papelera` que representa la función **Borrar tabla de dominio**.

> Atención
> Si hace clic en una tabla de dominio, o en el icono de `papel y lápiz`, ambas acciones le llevarán a la función **Editar tabla de dominio**.

Para crear una nueva **Tabla de dominio**, seleccione el botón `Nueva tabla de dominio` en la esquina inferior izquierda de la lista de tablas de dominio. 

En la página **Nueva tabla de dominio**, introduzca el nombre de la tabla de dominio en el menú **Nombre**, la versión de la tabla en el menú **Versión** y el grupo (si lo hay) al que pertenece la tabla de dominio en el menú **Grupo**.

Seleccione el botón `Guardar` para crear la tabla de dominio.

Para añadir las entradas a la tabla de dominio, introduzca la etiqueta de la entrada en el menú **Clave de entrada**, seleccione el idioma de la entrada en el menú **Idioma de la entrada**, e introduzca la descripción de la entrada en el menú **Descripción de la entrada**.

Seleccione el botón `Añadir` para introducir la entrada en la tabla de dominios.

> **¡Atención!**
> Para persistir los cambios en las tablas del dominio (cambios en el nombre de la tabla, versión o grupo, e inserciones, eliminaciones o edición de entradas de la tabla), debe seleccionar el botón `Guardar`. De lo contrario, los cambios se perderán.
 
El mismo procedimiento para agregar entradas se puede utilizar para editar información en la tabla de dominio.

</div>
</div>


<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">Gestión de plantillas de documentos</span>
</div>
<div class="content markdown">

## ¿Qué son las plantillas de documentos en CACAO?

CACAO es un sistema de recepción y mantenimiento de archivos con datos contables de los contribuyentes. Para recibir correctamente los archivos y validarlos, CACAO debe conocer de antemano su diseño y cómo interpretar sus datos.

> **¡Atención!**
> Cada una de las plantillas de documentos disponibles en la funcionalidad `Cargar Documentos` debe informarse y especificarse en la opción `Plantillas de Documentos` antes de su uso.


La **Plantilla de documento** contiene la siguiente información:

* El **Nombre** de la plantilla
* La **Versión** de la plantilla, utilizada para mantener un registro histórico de las modificaciones de la plantilla
* La **Periodicidad** con que la información debe ser enviada por los Contribuyentes a la Administración Tributaria
* Una identificación de **grupo** para consolidar diferentes plantillas con respecto a un objetivo común
* Si la plantilla está **Activa**, significa que es posible cargar archivos con esta plantilla
* Si la plantilla es **Requerida**, significa que para que CACAO evalúe correctamente los datos contables, se debe enviar un archivo con esta plantilla 
* Una lista de **Campos**. Para cada campo de la plantilla, se debe informar:
	* Nombre del campo**
	* El **tipo** de la información del campo
	* El **Mapeo** de la información a información específica esperada por CACAO
	* Si la información:
		* contiene **datos personales**
		* es **requerido** de **opcional**
		* debe ser **único** dentro del archivo
	* La **descripción** del campo

El **tipo** del campo indica el formato que CACAO debe esperar al leer el campo. CACAO entiende diferentes tipos, tales como:

* **Carácter**: una cadena de caracteres alfanuméricos
* **Entero**: un número sin divisiones decimales, como "12"
* **Decimal**: un número que acepta divisiones decimales, como "12.34"
* **Booleano**: un campo que contiene solo "verdadero" o "falso"
* **Fecha/Hora**: información con una fecha *y* una hora
* **Fecha**: una fecha que contiene día, mes y año
* **Mes**: la identificación de un solo mes
* **Específico del Dominio**: un tipo especial de campo definido por la Administración Tributaria
* **Estructura anidada**: un campo compuesto por otros campos

> **¡Atención!**
> Para obtener más información sobre el tipo de campo **Específico del dominio**, consulte la entrada `Tablas de dominio` en este manual del usuario.

El **mapeo** de un campo hace coincidir su información con una de las informaciones específicas esperadas por CACAO:

* Cualquier campo (cuando el campo no tiene un mapeo específico)
* Identificación fiscal
* Año fiscal
* Semestre Tributario
* Mes fiscal
* Día de impuestos
* Valor adeudado de impuestos
* Código de impuestos
* Impuesto

La siguiente tabla muestra un pequeño ejemplo de una lista de Campos de un Plan de Cuentas:

|Nombre|Tipo|Mapeo|Datos personales|Obligatorio|Único|Descripción|
|-|-|-|-|-|-|-|
|Identificación|Carácter|Identificación del Contribuyente|Sí|Sí|Sí|Número de Identificación del Contribuyente|
|Año|Entero|Año fiscal|No|Sí|Sí|Año fiscal de este informe financiero|
|Dirección|Carácter|Cualquier Campo|No|No|No|Dirección de trabajo del contribuyente|

## Entradas de documentos

Cada plantilla de documento debe tener al menos una **entrada de documento** para poder enviarse a CACAO. Una entrada de documento muestra a CACAO cómo encontrar los campos de una plantilla de documento dentro de un formato de archivo específico.

CACAO puede leer los siguientes formatos de archivo, que se pueden utilizar como entradas de documentos:

* **CSV** - Valores separados por comas
* **XLS** - Hojas de cálculo de Excel
* **JSON** - Notación de objetos de JavaScript
* **PDF** - formularios PDF
* **DOC** - Microsoft Word

Cada tipo de entrada tiene sus propias características. CACAO hace todo lo posible para hacer coincidir el contenido de los archivos con los campos definidos por la plantilla de documento.

El partido puede tener lugar de múltiples maneras. CACAO tiene una secuencia de pruebas y solo si ninguna tiene éxito, devuelve un error de validación.

La siguiente lista muestra las diferentes (y secuenciales) pruebas:

- **Primera prueba**: mediante expresiones regulares, intenta extraer valores del nombre del archivo (por ejemplo: el nombre del archivo contiene la identificación del contribuyente y el año fiscal)
- **Segunda prueba**: extraer los valores del índice de fila (posición de fila)
- **Tercera prueba**: extraer los valores del índice de la columna (posición de la columna)
- **Cuarta prueba**: mediante expresiones regulares, intenta hacer coincidir el nombre de las columnas de los archivos con los campos de la plantilla del documento

No todas las versiones de prueba son adecuadas para todos los formatos de archivo. Por ejemplo, la prueba **Tercera prueba** no es adecuada para los tipos **JSON** y **XML**, ya que no se pueden determinar las posiciones de las columnas como lo haríamos en un archivo **CSV**.

Uno debe recordar que este es el orden de las pruebas. Por ejemplo, si el nombre del archivo no coincide con las expresiones regulares definidas en la **Primera prueba**, se ejecutará la **Segunda prueba**.

Esta secuencia es por campo, se reinicializa para cada intento de coincidencia de los campos de la plantilla de documento. Por ejemplo, si la identificación del contribuyente se extrajo del índice de la columna (**Tercer prueba**), para el año fiscal la secuencia comienza desde el **Primera prueba**, tratando de extraer del nombre del archivo.

> _**CONTINUARÁ**_

## Arquetipo

Para facilitar la creación de Plantillas de documentos, CACAO tiene algunas plantillas de documentos **Arquetipos**. Esos arquetipos son plantillas de documentos precargados, para un conjunto común de documentos contables, cada uno con un conjunto completo de campos.

Los arquetipos de CACAO son:

* Catálogo de cuentas
* Libro mayor
* Estado de resultados
* Saldo de apertura
* Participación
* Genérico

Para usar los arquetipos para iniciar la creación de una plantilla de documento, seleccione la opción `Plantillas de documento` ubicada en el menú de la barra lateral. A continuación, seleccione la opción `Gestionar plantillas` en la parte inferior izquierda de la lista Plantillas de documentos y, por último, seleccione la tarjeta `Arquetipo`.

Después de seleccionar el arquetipo deseado, CACAO mostrará la interfaz **Editar plantilla de documento**. Desde este punto, es posible personalizar aún más la plantilla de documento.

</div>
</div>

<div>
<div class="title">
<i class="dropdown icon"></i>
<span class="ui header">API de CACAO</span>
</div>
<div class="content markdown">
## ¿Qué son las API y por qué las tiene CACAO?

Una **interfaz de programación de aplicaciones** (API) es una conexión entre computadoras o entre programas de computadora. Es un tipo de interfaz de software que ofrece un servicio a otras piezas de software. A diferencia de una interfaz de usuario, que conecta una computadora a una persona, una **API** conecta computadoras o piezas de software entre sí. No está destinado a ser utilizado directamente por una persona (el usuario final) que no sea un programador de computadoras que lo incorpore al software.

CACAO expone diferentes API para permitir que los sistemas de información de los contribuyentes se conecten directamente a CACAO y ejecuten todas las acciones, como la carga de archivos, automáticamente. La API de CACAO también permite que otros sistemas de información de la Administración Tributaria interactúen y compartan información entre ellos sin intervención humana.

> **¡Atención!**
> Todas las API de CACAO se adhieren al mismo Control de Acceso Basado en Perfiles que implementa la interfaz de usuario. **No todas las API están disponibles para todos los perfiles.**
> Si no tiene acceso a una API que necesita, póngase en contacto con la Administración Tributaria.

## Configuración de un token de acceso

**Antes** de usar cualquiera de las API de CACAO, debe crear un **token de acceso**. Este token reemplazará la información de usuario/contraseña para iniciar sesión en CACAO y acceder a la funcionalidad deseada.

Para crear un token de acceso, seleccione la opción `Configuraciones de CACAO` ubicada en el menú de la barra lateral. A continuación, seleccione `Configuración de la API de tokens`. Se desplegará una interfaz para administrar su token de acceso, con las siguientes opciones:

* **Ver token generado** le muestra el token que ya ha creado (si existe)
* **Generar un nuevo token** crea un nuevo token o reemplaza el anterior
* La opción **Borrar el token** elimina su token de CACAO

Por favor, **mantenga la información de este token en secreto**. No comparta ni publique esta información.

> **¡Atención!**
> Si cree que su token ha sido divulgado o comprometido, debe acceder a la opción `Configuración de la API de tokens` y eliminarlo.
> Todas las acciones autenticadas por el token son de exclusiva responsabilidad de su propietario. La Administración Tributaria **no** tiene acceso a los tokens.

## API disponibles

Para enumerar todas las API disponibles, seleccione la opción `Configuraciones CACAO` ubicada en el menú de la barra lateral. A continuación, seleccione `Documentación de la API de CACAO`. Se mostrará una interfaz _Swagger_.

Para cada API disponible, _Swagger_ muestra la descripción de la API, sus parámetros y respuestas.

> **¡Atención!**
> **Debe agregar** su token de autenticación a los parámetros de la API para poder acceder a ellos fuera del entorno de Swagger. Por ejemplo, suponga que su token de autenticación es **12345678-abcd-efgh-ijkl-123456789012** y que CACAO está alojado en **wwwcacao.host**.
> Una línea de comando para acceder a la API que enumera todas las plantillas de documentos disponibles sería como:
>
> `curl -X GET "https://wwwcacao.host/api/template" -H "aceptar: aplicación/json" -H "Autorización: api-key 12345678-abcd-efgh-ijkl-123456789012"`
>
> donde **"Autorización: api-key cbc1d881-b8bc-4e2d-b236-c168b01fc692"** es el parámetro que debe incluirse en el _header_ de la llamada API.

</div>
</div>

</div>
</body>